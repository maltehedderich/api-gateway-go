# Development Configuration
# This configuration is optimized for local development

server:
  http_port: 8080
  https_port: 8443
  tls_enabled: false
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 120s
  handler_timeout: 30s
  max_header_bytes: 1048576  # 1 MB
  shutdown_timeout: 30s
  enable_http2: true
  trusted_proxies: []

logging:
  level: debug
  format: text  # Use text format for easier reading during development
  output: stdout
  sanitize_patterns:
    - "(?i)password"
    - "(?i)token"
    - "(?i)secret"
    - "(?i)api[_-]?key"
  component_levels:
    http: debug
    server: debug
  enable_sampling: false
  sampling_rate: 1.0

authorization:
  enabled: false  # Disabled for development to simplify testing
  cookie_name: session_token
  jwt_signing_algorithm: HS256
  jwt_shared_secret: dev-secret-key-please-change-in-production
  clock_skew_tolerance: 5s
  required_claims:
    - sub
    - exp
  revocation_list_url: ""
  revocation_list_cache: 30s
  cache_auth_decisions: true
  cache_decision_ttl: 5m

rate_limit:
  enabled: false  # Disabled for development
  backend: memory
  redis_addr: ""
  redis_password: ""
  redis_db: 0
  failure_mode: fail-open
  global_limits:
    - key: ip
      limit: 1000
      window: 1m
      burst: 100

routes:
  - path_pattern: /api/v1/users
    methods:
      - GET
      - POST
    backend_url: http://localhost:3001
    timeout: 10s
    auth_policy: public
    strip_prefix: ""

  - path_pattern: /api/v1/orders
    methods:
      - GET
      - POST
      - PUT
      - DELETE
    backend_url: http://localhost:3002
    timeout: 10s
    auth_policy: public
    strip_prefix: ""

security:
  # TLS Configuration (disabled in dev, but can be enabled for testing)
  tls_min_version: "1.2"
  tls_cipher_suites: []  # Use defaults
  enable_https_redirect: false

  # HSTS (disabled for development)
  enable_hsts: false
  hsts_max_age: 0
  hsts_include_subdomains: false
  hsts_preload: false

  # Security Headers (enabled but lenient)
  content_security_policy: ""  # Disabled for easier dev tool usage
  frame_options: SAMEORIGIN
  content_type_nosniff: true
  xss_protection: true
  xss_block_mode: false
  referrer_policy: no-referrer-when-downgrade
  permissions_policy: ""

  # Cookie Security (not enforced for easier testing)
  enforce_cookie_security: false
  cookie_same_site: Lax

  # Input Validation (more permissive)
  max_request_body_size: 52428800  # 50 MB
  max_url_path_length: 4096
  allowed_methods:
    - GET
    - POST
    - PUT
    - DELETE
    - PATCH
    - OPTIONS
    - HEAD
  blocked_user_agents: []  # No blocks in development

  # Error Disclosure (show errors for debugging)
  hide_internal_errors: false
  production_mode: false

observability:
  metrics_enabled: true
  metrics_port: 9090
  metrics_path: /metrics
  health_path: /_health
  readiness_path: /_health/ready
  liveness_path: /_health/live
  tracing_enabled: false
  tracing_endpoint: ""
